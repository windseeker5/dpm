{% extends "base.html" %}
{% block title %}Pass {{ hockey_pass.pass_code }}{% endblock %}

{% block content %}


    <!-- QR Code Display -->
 
    <div class="qr-wrapper">
        <img src="data:image/png;base64,{{ qr_data }}" alt="QR Code" class="qr-image" />
    </div>
      

    <!-- Admin Redeem Form -->
    {% if is_admin and hockey_pass.games_remaining > 0 %}
    <div class="center-align">
        <form action="{{ url_for('redeem_pass', pass_code=hockey_pass.pass_code) }}" method="POST">
            <button type="submit" class="btn waves-effect">
              Redeem A Game
            </button>
        </form>
    </div>
    {% endif %}
    

    <br>


    <h3 class="center-align">Owner</h3>

    <div class="pass-info-wrapper">
      <div class="pass-info-box">
        <div class="pass-info-left">
          <div class="user-info">
            {{ hockey_pass.user_name }}<br>
            {{ hockey_pass.user_email }}<br>
            {{ hockey_pass.phone_number }}
          </div>
        </div>
        <div class="pass-info-right">
          <img src="{{ url_for('static', filename='uploads/logo.png') }}" alt="Logo" class="owner-logo" />
          <div class="pass-amount">
            ${{ "%.2f"|format(hockey_pass.sold_amt) }}
          </div>
        </div>
      </div>
    </div>
    

    <br>

    <div class="pass-history-wrapper">

        <h3 class="center-align">History</h3>
      
        <div class="history-table-container">
          <table class="highlight centered history-table">
            <thead>
              <tr>
                <th>Event</th>
                <th>Date</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>Created</td><td>{{ history.created }}</td></tr>
              <tr><td>Paid</td><td>{{ history.paid or '‚ùå Not Paid' }}</td></tr>
              {% for date in history.redemptions %}
                <tr><td>Redeem #{{ loop.index }}</td><td>{{ date }}</td></tr>
              {% endfor %}
              {% if history.expired %}
                <tr><td>Expired</td><td>{{ history.expired }}</td></tr>
              {% endif %}
            </tbody>
          </table>
        </div>
      </div>
      
      


    <!-- Unpaid Banner -->
    {% if not hockey_pass.paid_ind %}

    <div class="info-container">

        <!-- Divider -->
        <div class="custom-divider">
          <div class="line"></div>
          <img src="{{ url_for('static', filename='uploads/logo.jpg') }}" alt="Logo" class="divider-logo" />
          <div class="line"></div>
        </div>
      
        <!-- Text Section -->
        <div class="info-section">

            {{ email_info | safe }}
   
        </div>
 
    </div>


    

  {% endif %}
  
 
{% endblock %}
