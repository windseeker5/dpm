{% extends "base.html" %}
{% block title %}Edit Pass{% endblock %}

{% block content %}
<div class="container-xl mt-4">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <form method="POST" class="card">
        <div class="card-header">
          <h3 class="card-title">
            <i class="ti ti-ticket me-2"></i> Edit Digital Pass
          </h3>
        </div>
        <div class="card-body">

          <!-- Full Name & Email -->
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label">Full Name</label>
              <input type="text" name="user_name" class="form-control" value="{{ hockey_pass.user_name }}" required>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Email</label>
              <input type="email" name="user_email" class="form-control" value="{{ hockey_pass.user_email }}" required>
            </div>
          </div>

          <!-- Phone & Amount -->
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label">Phone Number</label>
              <input type="tel" name="phone_number" class="form-control" value="{{ hockey_pass.phone_number }}">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Amount Sold ($)</label>
              <input type="number" name="sold_amt" step="0.01" class="form-control" value="{{ hockey_pass.sold_amt }}">
            </div>
          </div>

          <!-- Games Remaining -->
          <div class="mb-3">
            <label class="form-label">Games Remaining</label>
            <input type="number" name="games_remaining" class="form-control" value="{{ hockey_pass.games_remaining }}">
          </div>

          <!-- Activity -->
          <div class="mb-3">
            <label class="form-label">Activity</label>
            <select name="activity" class="form-select" required>
              <option value="">-- Select Activity --</option>
              {% for a in activity_list %}
                <option value="{{ a }}" {% if a.strip().lower() == hockey_pass.activity|default('', true)|lower|trim %}selected{% endif %}>
                  {{ a }}
                </option>
              {% endfor %}
            </select>
          </div>

          <!-- Notes -->
          <div class="mb-3">
            <label class="form-label">Notes</label>
            <textarea name="notes" class="form-control" rows="3">{{ hockey_pass.notes }}</textarea>
          </div>

          <!-- Paid Checkbox (if unpaid) -->
          {% if not hockey_pass.paid_ind %}
          <div class="form-check form-switch mb-3">
            <input class="form-check-input" type="checkbox" name="paid_ind" id="paidCheck">
            <label class="form-check-label" for="paidCheck">
              Mark as Paid
            </label>
          </div>
          {% endif %}
        </div>

        <div class="card-footer d-flex justify-content-between">
          <a href="{{ url_for('show_pass', pass_code=hockey_pass.pass_code) }}" class="btn btn-outline-secondary">
            Cancel
          </a>
          <button type="submit" class="btn btn-primary">
            <i class="ti ti-device-floppy me-1"></i> Save Changes
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
