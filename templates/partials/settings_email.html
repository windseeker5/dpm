<!-- Email Settings Section -->
<div class="mb-4">
  <!-- Mail Server -->
  <div class="mb-3">
    <label class="form-label">Mail Server</label>
    <input type="text" class="form-control" name="mail_server" value="{{ settings.MAIL_SERVER or '' }}" required>
  </div>

  <div class="mb-3">
    <label class="form-label">Mail Port</label>
    <input type="number" class="form-control" name="mail_port" value="{{ settings.MAIL_PORT or '587' }}" required>
  </div>

  <div class="form-check mb-3">
    <input type="checkbox" class="form-check-input" name="mail_use_tls" id="mail_use_tls" {% if settings.MAIL_USE_TLS == 'True' %}checked{% endif %}>
    <label class="form-check-label" for="mail_use_tls">Use TLS</label>
  </div>

  <div class="mb-3">
    <label class="form-label">Email Username</label>
    <input type="email" class="form-control" name="mail_username" value="{{ settings.MAIL_USERNAME or '' }}" required>
  </div>

  <div class="mb-3">
    <label class="form-label">Email Password (Dev Mode)</label>
    <input type="text" class="form-control" name="mail_password_raw" value="{{ settings.get('MAIL_PASSWORD', '') }}" autocomplete="off" spellcheck="false" style="font-family: monospace;">
  </div>

  <div class="mb-3">
    <label class="form-label">Default Sender Email</label>
    <input type="email" class="form-control" name="mail_default_sender" value="{{ settings.MAIL_DEFAULT_SENDER or '' }}" required>
    <div class="form-text">The email address used as sender for all outgoing emails</div>
  </div>

  <div class="mb-3">
    <label class="form-label">Sender Name</label>
    <input type="text" class="form-control" name="mail_sender_name" value="{{ settings.MAIL_SENDER_NAME or '' }}" placeholder="e.g., LHGI, Your Organization">
    <div class="form-text">The display name shown in email clients (e.g., "LHGI &lt;lhgi@minipass.me&gt;")</div>
  </div>

  <!-- Database Maintenance -->
  <div class="mb-3">
    <hr class="my-4">
    <label class="form-label fw-bold">Database Maintenance</label>
    <div class="form-text mb-2">Clean up duplicate payment log entries from email processing glitches</div>
    <button type="button" class="btn btn-warning" onclick="cleanDuplicateLogs()">
      <i class="ti ti-trash me-1"></i>Clean Duplicate Payment Logs
    </button>
  </div>
</div>